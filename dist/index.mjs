var a=class l extends Set{some(e){for(let t of this)if(e(t,this))return!0;return!1}filter(e){let t=new l;for(let n of this)e(n,this)&&t.add(n);return t}random(){let e=this.values(),t=Math.floor(Math.random()*this.size);for(let n=0;n<t;n++)e.next();return e.next().value??null}};function b(l,e){let t=l.get(e)??new a;return l.set(e,t),t}var i=class l{constructor(e){this.pronunciation=e;this.syllables=[];let t=[],n=[];for(let s of this.pronunciation.phonemes)s.stress!=null?(t.length&&(n=[],this.syllables.push(l.formatSyllable(t))),t=[s]):t[0]?.stress&&t[0].stress<t.length?t.push(s):n.push(s);t.length?(this.lastRawSyllable=l.formatSyllable(t.concat(n)),this.syllables.push(l.formatSyllable(t))):(this.lastRawSyllable=this.pronunciation.phonemes.join(" "),this.syllables=[this.lastRawSyllable])}syllables;lastRawSyllable;static formatSyllable(e){return e.map(t=>t.phoneme).join(" ")}get syllableCount(){return this.syllables.length}get lastSyllable(){return this.syllables[this.syllables.length-1]}};import{getDict as y}from"node-cmudict";var u=class l{static _instance;_dict;rhymeData;constructor(){this._dict=null,this.rhymeData=new Map}static getInstance(){return l._instance||(l._instance=new l),l._instance}get dict(){return this._dict}get initialized(){return!!(this._dict&&this.rhymeData.size)}setDict(e){this._dict=e??y()}init(){this._dict||this.setDict();for(let e of this._dict.values())for(let t of e.pronunciations){let n=new i(t);if(n.syllableCount===1){let s=b(this.rhymeData,n.lastSyllable);s.some(c=>t.equals(c.pronunciation))||s.add(n)}}}exec(e){this.initialized||this.init();let t=e.trim().toLowerCase(),n=this._dict.get(t);if(!n)return null;let s=new a;for(let c of n.pronunciations){let o=new i(c),h=[];for(let r=0;r<o.syllableCount;r++){let f=this.rhymeData.get(o.syllables[r]);if(f){let p=(r===o.syllableCount-1?f.filter(m=>m.lastRawSyllable===o.lastRawSyllable):f).random();if(p)h.push(p.pronunciation.entry.name);else break}else break}h.length===o.syllableCount&&s.add(h.join(""))}return s.random()}};export{a as DataSet,i as Fez,u as Limon};
//# sourceMappingURL=index.mjs.map