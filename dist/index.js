"use strict";var p=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var w=(n,e)=>{for(var t in e)p(n,t,{get:e[t],enumerable:!0})},v=(n,e,t,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S(e))!D.call(n,s)&&s!==t&&p(n,s,{get:()=>e[s],enumerable:!(l=g(e,s))||l.enumerable});return n};var x=n=>v(p({},"__esModule",{value:!0}),n);var T={};w(T,{DataSet:()=>a,Fez:()=>i,Limon:()=>r});module.exports=x(T);var a=class n extends Set{some(e){for(let t of this)if(e(t,this))return!0;return!1}filter(e){let t=new n;for(let l of this)e(l,this)&&t.add(l);return t}random(){let e=this.values(),t=Math.floor(Math.random()*this.size);for(let l=0;l<t;l++)e.next();return e.next().value??null}};function m(n,e){let t=n.get(e)??new a;return n.set(e,t),t}var i=class n{constructor(e){this.pronunciation=e;this.syllables=[];let t=[],l=[];for(let s of this.pronunciation.phonemes)s.stress!=null?(t.length&&(l=[],this.syllables.push(n.formatSyllable(t))),t=[s]):t[0]?.stress&&t[0].stress<t.length?t.push(s):l.push(s);t.length?(this.lastRawSyllable=n.formatSyllable(t.concat(l)),this.syllables.push(n.formatSyllable(t))):(this.lastRawSyllable=this.pronunciation.phonemes.join(" "),this.syllables=[this.lastRawSyllable])}syllables;lastRawSyllable;static formatSyllable(e){return e.map(t=>t.phoneme).join(" ")}get syllableCount(){return this.syllables.length}get lastSyllable(){return this.syllables[this.syllables.length-1]}};var y=require("node-cmudict");var r=class n{static _instance;_dict;rhymeData;constructor(){this._dict=null,this.rhymeData=new Map}static getInstance(){return n._instance||(n._instance=new n),n._instance}get dict(){return this._dict}get initialized(){return!!(this._dict&&this.rhymeData.size)}setDict(e){this._dict=e??(0,y.getDict)()}init(){this._dict||this.setDict();for(let e of this._dict.values())for(let t of e.pronunciations){let l=new i(t);if(l.syllableCount===1){let s=m(this.rhymeData,l.lastSyllable);s.some(c=>t.equals(c.pronunciation))||s.add(l)}}}exec(e){this.initialized||this.init();let t=e.trim().toLowerCase(),l=this._dict.get(t);if(!l)return null;let s=new a;for(let c of l.pronunciations){let o=new i(c),h=[];for(let u=0;u<o.syllableCount;u++){let f=this.rhymeData.get(o.syllables[u]);if(f){let b=(u===o.syllableCount-1?f.filter(d=>d.lastRawSyllable===o.lastRawSyllable):f).random();if(b)h.push(b.pronunciation.entry.name);else break}else break}h.length===o.syllableCount&&s.add(h.join(""))}return s.random()}};0&&(module.exports={DataSet,Fez,Limon});
//# sourceMappingURL=index.js.map